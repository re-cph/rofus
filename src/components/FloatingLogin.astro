---
import Button from "./Button.astro";
import { getLangFromUrl } from "../i18n/utils";
const lang = getLangFromUrl(Astro.url);
import {
  getSecret,
 } from 'astro:env/server';

const rofusLink = `https://rofus${getSecret("ENVIRONMENT") === "staging" ? "demo" : "web"}.spillemyndigheden.dk/public/rofus?language=${lang}`;
---

<div class="floatingLogin overflow-hidden pointer-events-auto rounded-3xl">
  <a
    class="floatingLogin-button block bg-primary text-white px-5 pt-8 pb-5 no-underline rounded-t-3xl relative z-20 transition-all"
    target="_blank"
    href={rofusLink}
  >
    <img src="/images/logo_toggle.png" class="w-[200px] mb-5" alt="" />
    <div class="flex justify-between items-center">
      <div class="text-xs font-semibold">Log på ROFUS med MitID</div>
      <img class="w-[13px]" src="/images/digital_signatur_lock.png" alt="" />
    </div>
  </a>

  <div class="floatingLogin-content origin-[top_left_-1px]">
    <div class="px-4 py-6 bg-white text-sm rounded-b-3xl">
      <strong>
        I ROFUS kan du frivilligt udelukke dig selv fra onlinespil, fysiske
        kasinoer og væddemål i fysiske butikker i Danmark.
      </strong>

      <ul class="list-disc space-y-2 pl-10 my-4">
        <li>Tag en 24 timers spillepause</li>
        <li>Midlertidig udelukkelse i 1, 3 eller 6 måneder</li>
        <li>Endelig udelukkelse</li>
      </ul>

      <Button
        href={rofusLink}
        className="my-5 w-full"
      >
        Registrér med MitID
      </Button>

      <p class="text-xs text-center leading-relaxed">
        Vær opmærksom på, at Spillemyndigheden tager forbehold for eventuelle
        tekniske fejl i ROFUS og kan således ikke holdes ansvarlig for dette
      </p>
    </div>
  </div>
</div>
